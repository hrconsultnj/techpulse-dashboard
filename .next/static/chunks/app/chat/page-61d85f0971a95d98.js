(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{7828:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2115),n=r(2596),i=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}let l=s.forwardRef((e,t)=>{let{className:r,variant:s="default",size:n="default",asChild:i=!1,...l}=e;return(0,a.jsx)("button",{className:o("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{"bg-blue-600 text-white shadow hover:bg-blue-700":"default"===s,"bg-red-600 text-white shadow-sm hover:bg-red-700":"destructive"===s,"border border-gray-300 bg-white shadow-sm hover:bg-gray-50 hover:text-gray-900":"outline"===s,"bg-gray-100 text-gray-900 shadow-sm hover:bg-gray-200":"secondary"===s,"hover:bg-gray-100 hover:text-gray-900":"ghost"===s,"text-blue-600 underline-offset-4 hover:underline":"link"===s},{"h-9 px-4 py-2":"default"===n,"h-8 rounded-md px-3 text-xs":"sm"===n,"h-10 rounded-md px-8":"lg"===n,"h-9 w-9":"icon"===n},r),ref:t,...l})});l.displayName="Button";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:o("flex min-h-[60px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-400 dark:focus:ring-blue-500",r),ref:t,...s})});c.displayName="Textarea";var d=r(7347);class u{validateAudioFile(e){if(!e)return{valid:!1,error:"No audio file provided"};if(e.size>this.maxFileSize)return{valid:!1,error:"File size too large. Maximum size is ".concat(this.maxFileSize/1048576,"MB")};let t=e.type.split(";")[0];return this.supportedFormats.some(r=>r===e.type||r===t)?{valid:!0}:(console.log("File type:",e.type,"Base type:",t,"Supported:",this.supportedFormats),{valid:!1,error:"Unsupported file format: ".concat(e.type,". Supported formats: ").concat(this.supportedFormats.join(", "))})}async transcribeAudio(e){let t=this.validateAudioFile(e);if(!t.valid)throw Error(t.error);console.log("\uD83C\uDFA4 Transcribing audio file:",e.name,e.type,e.size,"bytes");try{return await this.callNextJSAPI(e)}catch(e){throw console.error("Transcription service error:",e),e instanceof Error?e:Error("Unknown transcription error")}}async callNextJSAPI(e){let t=new FormData;t.append("audio",e),console.log("\uD83C\uDF10 Calling secure Next.js transcription API with file:",e.name,"(".concat((e.size/1024).toFixed(1),"KB)"));let r=Date.now(),a=await fetch("/api/transcribe",{method:"POST",body:t}),s=Date.now()-r;if(!a.ok){let e=await a.text();throw console.error("❌ Next.js API error:",a.status,e),Error("Transcription API error: ".concat(a.status," ").concat(e))}let n=await a.json();return console.log("✅ Secure transcription completed in ".concat(s,"ms:"),n.text.substring(0,50)+"..."),{text:n.text,language:n.language,duration:n.duration,confidence:n.confidence||1}}async transcribeBlob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recording.webm",r=new File([e],t,{type:e.type||"audio/webm"});return this.transcribeAudio(r)}async getServiceStatus(){try{let e=await fetch("/api/transcribe",{method:"GET"});if(e.ok){let t=await e.json();return{active:"active"===t.status,model:t.model,secure:!0===t.secure}}return{active:!1,secure:!0}}catch(e){return console.error("Failed to get transcription service status:",e),{active:!1,secure:!0}}}constructor(){this.maxFileSize=0x1900000,this.supportedFormats=["audio/mpeg","audio/mp3","audio/wav","audio/webm","audio/ogg","audio/m4a","audio/mp4"]}}let m=new u;function g(){let[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(""),[i,u]=(0,s.useState)([]),[g,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!0),[f,b]=(0,s.useState)(!1),y=(0,s.useRef)(null),w=(0,s.useRef)(null),v=(0,s.useRef)(null),j=(0,s.useRef)(null),N=function(){let[e,t]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),{isRecording:k,isTranscribing:S,duration:C,audioBlob:D,transcriptionText:I,error:R,startRecording:P,stopRecording:z,clearRecording:E,transcribeRecording:T}=function(){let[e,t]=(0,s.useState)({isRecording:!1,isPaused:!1,isTranscribing:!1,duration:0,audioBlob:null,transcriptionText:"",error:null}),r=(0,s.useRef)(null),a=(0,s.useRef)([]),n=(0,s.useRef)(null),i=(0,s.useRef)(null),o=(0,s.useRef)(0),l=(0,s.useCallback)(e=>{t(t=>({...t,error:e}))},[]),c=(0,s.useCallback)(()=>{if(o.current){let e=Date.now()-o.current;t(t=>({...t,duration:Math.floor(e/1e3)}))}},[]),d=(0,s.useCallback)(async()=>{try{l(null);let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:44100}});n.current=e,a.current=[];let s=new MediaRecorder(e,{mimeType:MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm"});r.current=s,s.ondataavailable=e=>{e.data.size>0&&a.current.push(e.data)},s.onstop=()=>{let e=new Blob(a.current,{type:s.mimeType||"audio/webm"});t(t=>({...t,audioBlob:e,isRecording:!1,isPaused:!1})),n.current&&(n.current.getTracks().forEach(e=>e.stop()),n.current=null)},s.start(100),o.current=Date.now(),t(e=>({...e,isRecording:!0,isPaused:!1,duration:0,audioBlob:null,transcriptionText:""})),i.current=setInterval(c,1e3)}catch(e){l(e instanceof Error?e.message:"Failed to start recording"),console.error("Recording error:",e)}},[l,c]),u=(0,s.useCallback)(()=>{r.current&&e.isRecording&&(r.current.stop(),i.current&&(clearInterval(i.current),i.current=null))},[e.isRecording]),g=(0,s.useCallback)(()=>{r.current&&e.isRecording&&!e.isPaused&&(r.current.pause(),t(e=>({...e,isPaused:!0})),i.current&&(clearInterval(i.current),i.current=null))},[e.isRecording,e.isPaused]),h=(0,s.useCallback)(()=>{r.current&&e.isRecording&&e.isPaused&&(r.current.resume(),t(e=>({...e,isPaused:!1})),o.current=Date.now()-1e3*e.duration,i.current=setInterval(c,1e3))},[e.isRecording,e.isPaused,e.duration,c]),x=(0,s.useCallback)(()=>{i.current&&(clearInterval(i.current),i.current=null),t(e=>({...e,audioBlob:null,transcriptionText:"",duration:0,error:null})),a.current=[]},[]),p=(0,s.useCallback)(async()=>{if(!e.audioBlob)return l("No recording available to transcribe"),null;try{t(e=>({...e,isTranscribing:!0,error:null}));let r=await m.transcribeBlob(e.audioBlob);return t(e=>({...e,transcriptionText:r.text,isTranscribing:!1})),r.text}catch(r){let e=r instanceof Error?r.message:"Transcription failed";return t(t=>({...t,isTranscribing:!1,error:e})),null}},[e.audioBlob,l]),f=(0,s.useCallback)(()=>{if(!e.audioBlob)return void l("No recording available to download");let t=URL.createObjectURL(e.audioBlob),r=document.createElement("a");r.href=t,r.download="recording-".concat(new Date().toISOString().slice(0,19),".webm"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},[e.audioBlob,l]);return{...e,startRecording:d,stopRecording:u,pauseRecording:g,resumeRecording:h,clearRecording:x,transcribeRecording:p,downloadRecording:f}}();(0,s.useEffect)(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[e]),(0,s.useEffect)(()=>{I&&I.trim()&&n(I)},[I]),(0,s.useEffect)(()=>{!D||k||S||D===j.current||(j.current=D,T())},[D,k,S,T]),(0,s.useEffect)(()=>{N&&p(!1)},[N]);let F=(0,s.useCallback)(e=>{let t=[];for(let r of Array.from(e)){if(!["image/jpeg","image/png","image/gif","application/pdf","text/plain"].includes(r.type)){alert("File type ".concat(r.type," not allowed"));continue}if(r.size>0xa00000){alert("File ".concat(r.name," is too large (max 10MB)"));continue}t.push({name:r.name,type:r.type,size:r.size,file:r})}u(e=>[...e,...t])},[]),A=(0,s.useCallback)(e=>{u(t=>t.filter((t,r)=>r!==e))},[]),B=(0,s.useCallback)(async(e,r,a)=>{let s=new FormData;e.trim()&&s.append("text",e),r&&(console.log("Adding MP3 voice blob to FormData:",r.size,"bytes, type:",r.type),s.append("voice",r,"recording.mp3")),a&&a.length>0&&a.forEach((e,t)=>{s.append("file_".concat(t),e.file)}),s.append("timestamp",new Date().toISOString()),s.append("sessionId","current-session");try{let e="/api/webhook-proxy?type=customer-support";for(let[t,r]of(console.log("Sending to Next.js webhook proxy:",e),console.log("FormData contents:"),Array.from(s.entries())))r instanceof File?console.log("".concat(t,": File - ").concat(r.name," (").concat(r.size," bytes, ").concat(r.type,")")):console.log("".concat(t,": ").concat(r));let r=await fetch(e,{method:"POST",body:s});if(console.log("Proxy response status:",r.status),!r.ok){let e=await r.text();throw console.error("Proxy error response:",e),Error("Proxy failed with status ".concat(r.status,": ").concat(e))}let a=await r.json();console.log("Proxy response:",a);let n="";if(n="string"==typeof a?a:a.response?a.response:a.message?a.message:a.data?"string"==typeof a.data?a.data:JSON.stringify(a.data):JSON.stringify(a)){let e={id:Date.now().toString(),role:"assistant",content:n,timestamp:new Date};t(t=>[...t,e])}}catch(a){console.error("Detailed webhook error:",a);let e="I'm having trouble connecting right now. Please try again.";a instanceof TypeError&&a.message.includes("fetch")?e="Network connection failed. Please check your internet connection and try again.":a instanceof Error&&(a.message.includes("404")?e="The webhook endpoint was not found. Please check the configuration.":a.message.includes("403")||a.message.includes("401")?e="Access denied to the webhook. Please check authentication settings.":a.message.includes("500")&&(e="Server error occurred. The n8n workflow might have an issue."));let r={id:Date.now().toString(),role:"assistant",content:"".concat(e,"\n\n**Debug Info:**\n- Using Next.js API route for secure webhook proxy\n- Error: ").concat(a instanceof Error?a.message:"Unknown error","\n- Check browser console for more details."),timestamp:new Date};t(e=>[...e,r])}},[]),U=(0,s.useCallback)(async e=>{if(e.preventDefault(),r.trim()||0!==i.length||D){if(g)return void console.warn("Submission already in progress");try{h(!0);let e=r;!e&&D?e="\uD83C\uDFA4 Voice message":!e&&i.length>0&&(e="\uD83D\uDCCE ".concat(i.length," file(s) attached"));let a={id:Date.now().toString(),role:"user",content:e,timestamp:new Date,attachments:i.length>0?i:void 0,hasVoice:!!D};t(e=>[...e,a]),await B(r,D||void 0,i.length>0?i:void 0),n(""),u([]),E(),j.current=null,w.current&&(w.current.style.height="auto",w.current.style.overflowY="hidden")}catch(r){console.error("Submit error:",r);let e={id:Date.now().toString(),role:"assistant",content:"Sorry, there was an error sending your message: ".concat(r instanceof Error?r.message:"Unknown error"),timestamp:new Date};t(t=>[...t,e])}finally{h(!1)}}},[r,i,D,B,E]),O=(0,s.useCallback)(()=>{t([]),n(""),u([]),E()},[E]);return(0,a.jsxs)("div",{className:o("flex h-screen",f?"dark":""),children:[N&&x&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)}),(0,a.jsxs)("div",{className:o("bg-gray-900 dark:bg-gray-950 text-white transition-all duration-300 flex flex-col z-50",N?o("fixed inset-y-0 left-0 w-80 transform",x?"translate-x-0":"-translate-x-full"):x?"w-64":"w-0 overflow-hidden"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700 dark:border-gray-800",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)("img",{src:"/assets-review/imported-assets/images/techpulse-logo-dark.png",alt:"TechPulse",className:"h-[60px] w-auto"})}),(0,a.jsxs)(l,{onClick:O,className:"w-full bg-transparent border border-gray-600 hover:bg-gray-800 text-white justify-start",children:[(0,a.jsx)(d.In,{icon:"feather:plus",className:"w-4 h-4 mr-2"}),"New chat"]}),N&&(0,a.jsx)(l,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"text-white hover:bg-gray-800 lg:hidden mt-4",children:(0,a.jsx)(d.In,{icon:"feather:x",className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:(0,a.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm mt-8",children:(0,a.jsx)("p",{children:"Chat history will appear here"})})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(d.In,{icon:"feather:user",className:"w-4 h-4"}),(0,a.jsx)("span",{children:"TechPulse User"})]}),(0,a.jsx)(l,{variant:"ghost",size:"sm",onClick:()=>b(!f),className:"text-gray-400 hover:text-white hover:bg-gray-800",children:f?(0,a.jsx)(d.In,{icon:"feather:sun",className:"w-4 h-4"}):(0,a.jsx)(d.In,{icon:"feather:moon",className:"w-4 h-4"})})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:o("border-b border-gray-200 dark:border-gray-700 p-4 flex items-center justify-between",N?"px-4 py-3":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l,{variant:"ghost",size:"sm",onClick:()=>p(!x),className:"text-gray-600 dark:text-gray-400",children:N?(0,a.jsx)(d.In,{icon:"feather:menu",className:"w-5 h-5"}):(0,a.jsx)(d.In,{icon:"feather:sidebar",className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gradient-to-r from-blue-500 to-cyan-500 p-0.5",children:(0,a.jsx)("img",{src:"/assets-review/imported-assets/images/synth-headshot.png",alt:"Synth",className:"w-full h-full rounded-full object-cover"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:o("font-semibold text-gray-900 dark:text-white",N?"text-lg":"text-xl"),children:"Synth"}),!N&&(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"TechPulse AI Assistant"})]})]})]}),(0,a.jsx)(l,{variant:"ghost",size:"sm",className:"text-gray-600 dark:text-gray-400",children:(0,a.jsx)(d.In,{icon:"feather:settings",className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===e.length?(0,a.jsx)("div",{className:"flex items-center justify-center h-full p-4",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-gradient-to-r from-blue-500 to-cyan-500 p-1 mx-auto mb-6",children:(0,a.jsx)("img",{src:"/assets-review/imported-assets/images/synth-headshot.png",alt:"Synth",className:"w-full h-full rounded-full object-cover"})}),(0,a.jsx)("h2",{className:o("font-semibold text-gray-900 dark:text-white mb-2",N?"text-xl":"text-2xl"),children:"Hi, I'm Synth"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:"I'm your automotive technical support assistant. I can help diagnose car problems, provide repair guidance, and analyze images of automotive issues."}),N&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:"\uD83D\uDCAC Ask questions"})}),(0,a.jsx)("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium",children:"\uD83C\uDFA4 Hold to record"})}),(0,a.jsx)("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"\uD83D\uDCF7 Upload images"})})]})]})}):(0,a.jsxs)("div",{className:o("mx-auto px-4 py-6",N?"max-w-none":"max-w-3xl"),children:[e.map(e=>{var t;return(0,a.jsx)("div",{className:o("mb-8",N?"mb-6":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:o("rounded-full flex items-center justify-center flex-shrink-0",N?"w-8 h-8":"w-10 h-10","user"===e.role?"bg-blue-600":"bg-gradient-to-r from-blue-500 to-cyan-500 p-0.5"),children:"user"===e.role?(0,a.jsx)(d.In,{icon:"feather:user",className:o("text-white",N?"w-4 h-4":"w-5 h-5")}):(0,a.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:"/assets-review/imported-assets/images/synth-headshot.png",alt:"Synth",className:"w-full h-full object-cover"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:o("font-medium text-gray-900 dark:text-white mb-1","text-sm"),children:"user"===e.role?"You":"Synth"}),(0,a.jsx)("div",{className:o("text-gray-800 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",N?"text-sm":""),children:e.content}),null==(t=e.attachments)?void 0:t.map((e,t)=>(0,a.jsx)("div",{className:"mt-3",children:e.type.startsWith("image/")?(0,a.jsx)("div",{className:o("rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",N?"max-w-full":"max-w-sm"),children:(0,a.jsx)("img",{src:URL.createObjectURL(e.file),alt:e.name,className:"object-cover w-full",style:{maxHeight:"200px"}})}):(0,a.jsxs)("div",{className:o("flex items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",N?"max-w-full":"max-w-sm"),children:[(0,a.jsx)(d.In,{icon:"feather:file-text",className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),(0,a.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e.name})]})},t))]})]})},e.id)}),g&&(0,a.jsx)("div",{className:o("mb-8",N?"mb-6":""),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:o("bg-gradient-to-r from-blue-500 to-cyan-500 p-0.5 rounded-full",N?"w-8 h-8":"w-10 h-10"),children:(0,a.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden",children:(0,a.jsx)("img",{src:"/assets-review/imported-assets/images/synth-headshot.png",alt:"Synth",className:"w-full h-full object-cover"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:o("font-medium text-gray-900 dark:text-white mb-1","text-sm"),children:"Synth"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})]})}),(0,a.jsx)("div",{ref:v})]})}),(0,a.jsxs)("div",{className:o("border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",N?"p-3":"p-4"),children:[(0,a.jsxs)("div",{className:o("mx-auto",N?"max-w-none":"max-w-3xl"),children:[i.length>0&&(0,a.jsx)("div",{className:"mb-4 flex flex-wrap gap-2",children:i.map((e,t)=>(0,a.jsx)("div",{className:"relative group",children:e.type.startsWith("image/")?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:URL.createObjectURL(e.file),alt:e.name,className:"rounded-lg border border-gray-200 dark:border-gray-700 object-cover",style:{width:N?"60px":"80px",height:N?"60px":"80px"}}),(0,a.jsx)(l,{variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 w-6 h-6 p-0 opacity-0 group-hover:opacity-100",onClick:()=>A(t),children:(0,a.jsx)(d.In,{icon:"feather:x",className:"w-3 h-3"})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,a.jsx)(d.In,{icon:"feather:file-text",className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),(0,a.jsx)("span",{className:"text-sm max-w-32 truncate text-gray-700 dark:text-gray-300",children:e.name}),(0,a.jsx)(l,{variant:"ghost",size:"sm",className:"w-4 h-4 p-0 opacity-0 group-hover:opacity-100",onClick:()=>A(t),children:(0,a.jsx)(d.In,{icon:"feather:x",className:"w-3 h-3"})})]})},t))}),(0,a.jsx)("form",{onSubmit:U,className:"relative",children:(0,a.jsxs)("div",{className:o("flex items-end gap-2 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-800 shadow-sm",N?"p-2":"p-3"),children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(l,{type:"button",variant:"ghost",size:"sm",className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",onClick:()=>{var e;return null==(e=y.current)?void 0:e.click()},children:(0,a.jsx)(d.In,{icon:"feather:paperclip",className:"w-5 h-5"})}),(0,a.jsx)(l,{type:"button",variant:"ghost",size:"sm",className:o(k?"text-red-500 hover:text-red-600 animate-pulse":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),onClick:k?z:P,disabled:S,title:k?"Recording ".concat(Math.floor(C/60),":").concat((C%60).toString().padStart(2,"0")," - Click to stop"):S?"Transcribing audio...":"Click to start recording (auto-transcribed)",children:k?(0,a.jsx)(d.In,{icon:"feather:square",className:"w-5 h-5"}):S?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"}):(0,a.jsx)(d.In,{icon:"feather:mic",className:"w-5 h-5"})})]}),(0,a.jsx)(c,{ref:w,name:"message",value:r,onChange:e=>{n(e.target.value),e.target.style.height="auto",e.target.scrollHeight<=120?(e.target.style.height=e.target.scrollHeight+"px",e.target.style.overflowY="hidden"):(e.target.style.height="120px",e.target.style.overflowY="auto")},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U(e))},placeholder:"Message Synth...",className:"flex-1 min-h-[24px] max-h-[120px] resize-none border-0 focus:ring-0 focus:outline-none bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 overflow-y-auto",disabled:g,rows:1}),(0,a.jsx)(l,{type:"submit",size:"sm",disabled:g||S||!r.trim()&&0===i.length&&!D,className:"bg-black dark:bg-white hover:bg-gray-800 dark:hover:bg-gray-200 text-white dark:text-black rounded-lg px-3",children:(0,a.jsx)(d.In,{icon:"feather:send",className:"w-4 h-4"})})]})}),R&&(0,a.jsxs)("p",{className:"text-xs text-red-500 dark:text-red-400 text-center mt-1",children:["⚠️ ",R]}),k&&(0,a.jsxs)("p",{className:"text-xs text-blue-500 dark:text-blue-400 text-center mt-1",children:["\uD83C\uDFA4 Recording ",Math.floor(C/60),":",(C%60).toString().padStart(2,"0")]}),S&&(0,a.jsx)("p",{className:"text-xs text-amber-500 dark:text-amber-400 text-center mt-1",children:"⏳ Transcribing audio..."}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-2",children:"Click mic to record & transcribe • Synth can make mistakes. Check important automotive information."})]}),(0,a.jsx)("input",{ref:y,type:"file",multiple:!0,accept:"image/*,.pdf,.txt",className:"hidden",onChange:e=>e.target.files&&F(e.target.files)})]})]})]})}function h(){return(0,a.jsx)(g,{})}},9711:(e,t,r)=>{Promise.resolve().then(r.bind(r,7828))}},e=>{var t=t=>e(e.s=t);e.O(0,[347,277,441,684,358],()=>t(9711)),_N_E=e.O()}]);